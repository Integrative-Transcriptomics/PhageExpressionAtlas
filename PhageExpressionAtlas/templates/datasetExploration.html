{% extends "index.html" %}

{% block title %}Dataset Exploration{% endblock %}

{% block content %}
<div id="content-exploration">

    <div class="page-header">
        <h1>Dataset Exploration</h1>
    </div>

    
    <div id="exploration-main-content" class="main-content">

        <div id="phage-host-interaction" class="exploration-container">

            <aside>
                <div class="header-w-info">
                    <h4>Make your selections</h4>
                    <sl-tooltip placement="right" >
                        <div slot="content" class="tooltip-content">
                            Make your selections sequentially from <strong>top to bottom</strong>.
                            <br>
                            To explore a specific Study, go to <strong>Data Overview</strong> â†’ <strong>Datasets</strong>,  
                            select a study by clicking on a study, and click <strong>Explore Dataset</strong>.
                        </div>
                        <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                    </sl-tooltip>
                    
                </div>
                
                <sl-divider> </sl-divider>
    
                <sl-select id="phages-select" class="selector single" label="1. Select Phage of interest" size="small" placement="bottom">
                </sl-select>
                
                <sl-select id="hosts-select" class="selector single" label="2. Select Host of interest" size="small" placement="bottom"></sl-select>
    
                <sl-divider> </sl-divider>
    
                <sl-select id="studies-select" class="selector single" label="3. Select Study" size="small" placement="bottom"> </sl-select>


                <sl-divider></sl-divider>
                
                <sl-button id="deselect-all-button" size="small" aria-label="Deselect all"> <sl-icon slot="prefix" name="x"> </sl-icon> Deselect all</sl-button>

                <br>
                <div id="info-study-header">
                    <p class="small-p">Information:</p>
                    <sl-tooltip content="Download Dataset">
                        <sl-icon-button id="download-dataset-button"
                        class="download-icon-button" name="download"></sl-icon-button>
                    </sl-tooltip>
                </div>

                <div id="info-study">
                    No Information available
                </div>
                <!-- <div class="citation-container">
                    <span id="citation" class="small-p">No Citation availabe</span>
                    <sl-copy-button from="citation"></sl-copy-button>
                </div> -->
                
    
            </aside>
    
            <main>
                <h3 class="category-header">Phage-Host interactions</h3>

                <div class="category-container">
                    <h3>Heatmaps</h3>
                    
                
                    <div class="card-container">
                        
                        <div class="graph-card">
                            <div class="header-w-info">
                                <h4>Phage Heatmap</h4>
                                <sl-tooltip placement="right" >
                                    <div slot="content" class="tooltip-content">
                                        Heatmap of all phage genes based on mean TPM values per time point normalized
                                        by z-score and clustered by similarity of gene expression over the time course of infection. 
                                    </div>
                                    <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                                </sl-tooltip>

                                <div class="double-range-container" id="slider-phages">
                                    <div class="slider">
                                        <input id="left-slider-phages" class="left-slider" type="range" value="0" min="0" max="100" autocomplete="off">
                                        <input id="right-slider-phages" class="right-slider" type="range" value="100" min="0" max="100" autocomplete="off">
                                    </div>
                                    <div class="form-control-container">
                                        <sl-input id="min-input-field-phages" label="Lowest Variance" type="number" max="100" min="0" value="0" class="number-input-field-slider" size="small"></sl-input>
                                        <sl-input id="max-input-field-phages" label="Highest Variance" type="number" max="100" min="0" value="100" class="number-input-field-slider" size="small"></sl-input>
                                        
                                    </div>
                                </div> 
                            </div>
                            <!-- <p class="chart-info">
                                Heatmap of all Phage genes' mean TPM values normalized
                                by z-score per timepoint and clustered by similarity of gene expression over the time course of infection. 
                            </p> -->
                            <div class="spinner-container" id="spinner-container-phage-heatmap">
                                <sl-spinner id="phage-heatmap-spinner" class="spinner" intermediate></sl-spinner>
                            </div>
                            <div class="graph-container" id="phage-heatmap-container"></div>
                            
                        </div>

                        <div class="graph-card">
                            <div class="header-w-info">
                                <h4>Host Heatmap</h4>
                                <sl-tooltip placement="right" >
                                    <div slot="content" class="tooltip-content">
                                        Heatmap of all host genes based on mean TPM values per time point normalized
                                        by z-score and clustered by similarity of gene expression over the time course of infection. 
                                    </div>
                                    <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                                </sl-tooltip>
                                <div class="double-range-container" id="slider-hosts">
                                    <div class="slider">
                                        <input id="left-slider-hosts" class="left-slider" type="range" value="70" min="0" max="100" autocomplete="off">
                                        <input id="right-slider-hosts" class="right-slider" type="range" value="100" min="0" max="100" autocomplete="off">
                                    </div>
                                    <div class="form-control-container">
                                        <sl-input id="min-input-field-hosts" label="Lowest Variance" type="number" max="100" min="0" value="70" class="number-input-field-slider" size="small"></sl-input>
                                        <sl-input id="max-input-field-hosts" label="Highest Variance" type="number" max="100" min="0" value="100" class="number-input-field-slider" size="small"></sl-input>
                                        
                                    </div>
                                </div>
                            </div>

                            <div class="spinner-container" id="spinner-container-host-heatmap">
                                <sl-spinner id="host-heatmap-spinner" class="spinner" intermediate></sl-spinner>
                            </div>
        
                            <div class="graph-container" id="host-heatmap-container"></div>
                        </div>
                    </div>
                </div>

                
                

                
            </main>
        </div>

        <div class="exploration-container" >
            <aside>
                <div class="header-w-info">
                    <span class="form-control-label">
                        Select Phage Gene Classification Method
                        
                        <sl-tooltip >
                        <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                        <div slot="content" class="tooltip-content">
                            <p class="small-p">
                                The Classification method determines the gene classification.
                                <ul>
                                    <li><strong>Class Max</strong>: classification is based on the gene's highest expression level.</li>
                                    <li><strong>Class Threshold</strong>: classification is based on a defined expression threshold of 0.2.</li>
                                    <li><strong>Custom Threshold</strong>: classification is based on a custom threshold. For each classification (early phase, middle phase, late phase) a time point threshold for can be selected together with a threshold between 0 and 1.</li>
                                </ul>
                            </p>
                        </div>
                    </sl-tooltip>
                    </span>
                </div>
                
                <sl-select id="classification-method-exploration" size="small" value="ClassMax">
                    <sl-option value="ClassMax"> Class Max</sl-option>
                    <sl-option value="ClassThreshold"> Class Threshold (0.2)</sl-option>
                    <sl-option value="CustomThreshold"> Custom Threshold</sl-option>
                </sl-select>

                <div class="custom-threshold-container">
                    <sl-select id="early-select" label="Early" value="" size="small" clearable></sl-select>

                    <sl-select id="middle-select" label="Middle" value="" size="small" clearable></sl-select>

                    <sl-select id="late-select" label="Late" value="" size="small" clearable></sl-select>
                    
                    <sl-input id="custom-threshold" label="Threshold" value="" min="0" max="1" step="0.01" type="number" size="small"></sl-input>

                </div>

            </aside>

            <main>
                <h3>Phage Gene Classification</h3>
                <div class="card-container">
                    <div class="graph-card double">
                        <div id="gene-expression-header">
                            <div class="header-w-info">
                                <h4>Phage Gene Expression Profiles</h4>
                                <sl-tooltip placement="right" >
                                    <div slot="content" class="tooltip-content">
                                        Phage gene expression over time course of infection based on mean TPM values per time point normalized to the highest mean TPM value per gene.
                                        Phage genes are classified (early, middle, late) either based on the time point of maximal expression (Class Max) or a threshold of 20 % of maximal gene expression (Class Threshold)
                                    </div>
                                    <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                                </sl-tooltip>
                            </div>
                        </div>
                
                        <div class="spinner-container" id="spinner-container-class-timeseries-container">
                            <sl-spinner id="class-timeseries-spinner" class="spinner" intermediate></sl-spinner>
                        </div>
                        <div class="graph-container" id="class-timeseries-container"></div>
                    </div>
                    <!-- <div class="graph-card">
                        <div class="header-w-info">
                            <h4></h4>
                            <sl-tooltip placement="top" >
                                <div slot="content" class="tooltip-content">
                                </div>
                                <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                            </sl-tooltip>
                        </div>
                
                        <div class="graph-container" id="chord-container"></div>
                
                    </div>
                -->
                </div>
            </main>
        </div>


    
    
    
        <sl-divider></sl-divider>
    
    
        <div id="gene-selection" class="exploration-container">
                
            <aside>
                <div class="header-w-info">
                    <h4>Make your selections</h4>
                    <sl-tooltip placement="right" content="">
                        <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                    </sl-tooltip>
                </div>
    
                <sl-divider> </sl-divider>
    
                <sl-select id="phage-genes-select" class="selector" multiple size="small" label="Select Phage Genes" placement="bottom" max-options-visible=1> 
                
                </sl-select>
                <sl-select id="host-genes-select" class="selector" multiple size="small" label="Select Host Genes" placement="bottom" max-options-visible=1></sl-select>
    
    
            </aside>
    
            <main>
                <h3 class="category-header">Gene selection</h3>
    
                <div class="card-container">
                    <div class="card-container">
                        <div class="genome-container">
                            <div class="header-w-info">
                                <h4>Phage Genome</h4>
                                <sl-tooltip placement="right" >
                                    <div slot="content" class="tooltip-content">
                                        Visualization of the selected Phage Genome. 
                                        <br>
                                        <br>
                                        The colored areas represent the selected genes, while the gray blocks represent the genes that are currently not selected. 
                                        <br>
                                        <br>
                                        Please note: he data displayed in the genome viewer is sourced directly from GFF files, without cleaning or validation. We do not take responsibility for its accuracy or biological correctness
                                    </div>
                                    <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                                </sl-tooltip>
                                <sl-checkbox id="show-classification-checkbox" size="small">Show Gene Classification</sl-checkbox>
                            </div>
                        
                            <div class="spinner-container" id="spinner-container-phage-genome">
                                <sl-spinner id="phage-genome-spinner" class="spinner" intermediate></sl-spinner>
                            </div>
                            <div  id="phage-genome"></div>
                        
                        </div>
                        <div class="genome-container">
                            <div class="header-w-info">
                                <h4>Host Genome</h4>
                                <sl-tooltip placement="right" >
                                    <div slot="content" class="tooltip-content">
                                        Visualization of the selected Host Genome.
                                        <br>
                                        <br>
                                        The colored areas represent the selected genes, while the gray blocks represent the genes that are currently not selected. 
                                        <br>
                                        <br>
                                        Please note: he data displayed in the genome viewer is sourced directly from GFF files, without cleaning or validation. We do not take responsibility for its accuracy or biological correctness.
                                    </div>
                                    <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                                </sl-tooltip>
                            </div>
                        
                            <div class="spinner-container" id="spinner-container-host-genome">
                                <sl-spinner id="host-genome-spinner" class="spinner" intermediate></sl-spinner>
                            </div>
                            <div id="host-genome"></div>
                        
                        </div>
                    </div>


                    <div class="graph-card">
                        <div class="header-w-info">
                            <h4>Phage Genes</h4>
                            <sl-tooltip placement="right" >
                                <div slot="content" class="tooltip-content">
                                    Phage gene expression profiles over the time course of infection based on mean TPM values normalized to the highest mean TPM value per gene.
                                </div>
                                <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                            </sl-tooltip>
                        </div>
                        
                        <div class="spinner-container" id="spinner-container-phage-genes-timeseries">
                            <sl-spinner id="phage-genes-timeseries-spinner" class="spinner" intermediate></sl-spinner>
                        </div>
                        <div class="graph-container" id="phage-genes-timeseries-container"></div>
                        
                    </div>

                    <div class="graph-card">
                        <div class="header-w-info">
                            <h4>Host Genes</h4>
                            <sl-tooltip placement="right" >
                                <div slot="content" class="tooltip-content">
                                    Host gene expression profiles over the time course of infection based on mean TPM values normalized to the highest mean TPM value per gene.
                                </div>
                                <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                            </sl-tooltip>
                        </div>
                        
                        <div class="spinner-container" id="spinner-container-host-genes-timeseries">
                            <sl-spinner id="host-genes-timeseries-spinner" class="spinner" intermediate></sl-spinner>
                        </div>
                        <div class="graph-container" id="host-genes-timeseries-container"></div>
                        
                    </div>

                    <div class="graph-card">
                        <div class="header-w-info">
                            <h4>Selected Phage Gene Heatmap</h4>
                            <sl-tooltip placement="right" >
                                <div slot="content" class="tooltip-content">
                                    Heatmap of all selected phage genes based on mean TPM values per time point normalized
                                    by z-score and clustered by similarity of gene expression over the time course of infection. 
                                </div>
                                <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                            </sl-tooltip>
                        </div>
                        <!-- <p class="chart-info">
                            Heatmap of all selected Phage genes' mean TPM values normalized
                            by z-score per timepoint and clustered by similarity of gene expression over the time course of infection. 
                        </p> -->
                        <div class="spinner-container" id="spinner-container-phage-genes-heatmap">
                            <sl-spinner id="phage-genes-heatmap-spinner" class="spinner" intermediate></sl-spinner>
                        </div>
                        <div class="graph-container" id="phage-gene-heatmap-container"></div>
                        
                    </div>

                    <div class="graph-card">
                        <div class="header-w-info">
                            <h4>Selected Host Gene Heatmap</h4>
                            <sl-tooltip placement="right" >
                                <div slot="content" class="tooltip-content">
                                    Heatmap of all selected host genes based on mean TPM values per time point normalized
                                    by z-score and clustered by similarity of gene expression over the time course of infection. 
                                </div>
                                <sl-icon-button name="info-circle" aria-label="Information"></sl-icon-button>
                            </sl-tooltip>
                        </div>
                        <!-- <p class="chart-info">
                            Heatmap of all selected Host genes' mean TPM values normalized
                            by z-score per timepoint and clustered by similarity of gene expression over the time course of infection. 
                        </p> -->

                        <div class="spinner-container" id="spinner-container-host-genes-heatmap">
                            <sl-spinner id="host-genes-heatmap-spinner" class="spinner" intermediate></sl-spinner>
                        </div>
                        <div class="graph-container" id="host-gene-heatmap-container"></div>
                        
                    </div>
                </div>
    
            </main>
    
        </div>
    
    </div>
    
    

</div>


</div>
{% endblock %}

