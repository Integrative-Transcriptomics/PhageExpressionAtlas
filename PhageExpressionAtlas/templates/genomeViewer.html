{% extends "index.html" %}

{% block title %}Genome Viewer{% endblock %}

{% block content %}



<div id="content-viewer">

    <div class="page-header">
        <h1>Genome Viewer</h1>
    </div>


    <div id="viewer-main-content" class="main-content">
        <aside>
            <div class="header-w-info">
                <h4>Make your selections</h4>
                <sl-tooltip placement="right" content="Select the Phage you want to view in the genome viewer on the right.">
                <sl-icon-button name="info-circle" label="Information"><sl-icon-button>
                </sl-tooltip>
            </div>
            
            <sl-divider> </sl-divider>

            <sl-select id="phages-select-viewer" class="selector single" label="Select Genome of interest" size="small" placement="bottom">
            </sl-select>

            <sl-select id="dataset-select-viewer" class="selector single" label="Select Dataset for Gene Classification" size="small" placement="bottom">
            </sl-select>

            <div class="header-w-info">
                    <span class="form-control-label">
                        Select Phage Gene Classification Method
                        
                        <sl-tooltip placement="right" >
                        <sl-icon-button name="info-circle" label="Information"></sl-icon-button>
                        <div slot="content" class="tooltip-content">
                            <p class="small-p">
                                The Classification method determines the gene classification.
                                <ul>
                                    <li><strong>Class Max</strong>: classification is based on the gene's highest expression level.</li>
                                    <li><strong>Class Threshold</strong>: classification is based on a defined expression threshold of 0.2.</li>
                                    <li><strong>Custom Threshold</strong>: classification is based on a custom threshold. For each classification (early phase, middle phase, late phase) a time point threshold for can be selected together with a threshold between 0 and 1.</li>
                                </ul>
                            </p>
                        </div>
                    </sl-tooltip>
                    </span>
                </div>
                
                <sl-select id="classification-method" size="small" value="ClassMax" label="Select Classification Method">
                    <sl-option value="ClassMax"> Class Max</sl-option>
                    <sl-option value="ClassThreshold"> Class Threshold (0.2)</sl-option>
                    <sl-option value="CustomThreshold"> Custom Threshold</sl-option>
                </sl-select>

                <div class="custom-threshold-container">
                    <sl-select id="early-select" label="Early Boundary Timepoint" value="" size="small" clearable></sl-select>

                    <sl-select id="middle-select" label="Middle Boundary Timepoint" value="" size="small" clearable></sl-select>

                    <sl-select id="late-select" label="Late Boundary Timepoint" value="" size="small" clearable></sl-select>
                    
                    <sl-input id="custom-threshold" label="Threshold" value="" min="0" max="1" step="0.01" type="number" size="small"></sl-input>

                </div>

                <sl-divider></sl-divider>

                <div id="download-container">
                    Download GFF: 
                    <sl-icon-button id="download-gff-button" class="download-icon-button" name="download" label="Download Dataset">
                    </sl-icon-button>
                </div>
                
                
            
        </aside>

        <main id="viewer-main">
            <h3>Genome Viewer</h3>

            <div id="genome-container" class="graph-card double">

                <div id="title">
                    <h4><span id="genome-title">Phage</span></h4> 
                </div>

                
                <p class="note">* Please note, the data displayed in the genome viewer is sourced directly from GFF files, without cleaning or validation. We do not take responsibility for its accuracy or biological correctness</p>
                
                <div class="spinner-container" id="spinner-container-viewer">
                    <sl-spinner id="genome-spinner" class="spinner" intermediate></sl-spinner>
                </div>
                <div id="genome">

                
            </div>
        </main>
        


        </div>





    </div>



    

</div>

<div id="warning-container">
    <div class="warning">
        <sl-icon-button name="x" id="close-warning" label="Close Warning Window"></sl-icon-button>

        <svg
            width="401.56558mm"
            height="207.5742mm"
            viewBox="0 0 401.56558 207.5742"
            version="1.1"
            id="svg1"
            xml:space="preserve"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:svg="http://www.w3.org/2000/svg"><defs
                id="defs1" /><g
                id="layer1"
                transform="translate(-458.88972,207.57421)"><ellipse
                style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:2.00432;stroke-linecap:round;stroke-linejoin:round;paint-order:markers fill stroke"
                id="path8"
                cx="268.2439"
                cy="357.79178"
                rx="47.84832"
                ry="46.80043" /><text
                xml:space="preserve"
                id="text8"
                style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:19.7556px;line-height:0;font-family:Arial;-inkscape-font-specification:Arial;letter-spacing:2.70933px;word-spacing:0.537104px;white-space:pre;fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:9.07087;stroke-linecap:round;stroke-linejoin:round;paint-order:markers fill stroke"
                transform="matrix(-0.55290672,0.87184969,-0.8653741,-0.54221664,560.87563,27.963549)"><textPath
                    xlink:href="#path8"
                    id="textPath8"><tspan
                    style="fill:#000000;fill-opacity:1;stroke:none"
                    id="tspan8">PhageExpressionAtlas</tspan></textPath></text><path
                id="path2882"
                style="fill:#355f50;fill-opacity:1;stroke:none;stroke-width:0.903086;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;paint-order:stroke fill markers"
                d="m 659.54527,-185.71683 -36.52593,21.57233 -0.0424,39.5888 36.82566,21.74906 25.82375,-15.25179 10.90786,-6.44198 v -39.37072 z m -11.66957,26.15499 a 4.6717157,6.4244542 0 0 1 4.67207,6.42442 4.6717157,6.4244542 0 0 1 -4.67207,6.42441 4.6717157,6.4244542 0 0 1 -4.67155,-6.42441 4.6717157,6.4244542 0 0 1 4.67155,-6.42442 z m 23.62698,0 a 4.6717157,6.4244542 0 0 1 4.67207,6.42442 4.6717157,6.4244542 0 0 1 -4.67207,6.42441 4.6717157,6.4244542 0 0 1 -4.67155,-6.42441 4.6717157,6.4244542 0 0 1 4.67155,-6.42442 z m -12.22613,25.9209 c 2.89601,4.8e-4 5.7913,0.32238 8.04861,0.96687 2.59581,0.74113 4.65915,1.4857 4.65915,1.4857 a 1.1983764,1.137415 0 0 1 0.69608,1.46606 1.1983764,1.137415 0 0 1 -1.54461,0.66094 c 0,0 -1.99225,-0.71738 -4.5005,-1.43351 -3.7936,-1.08318 -10.92396,-1.08389 -14.71745,-0.002 -2.50836,0.71534 -4.5005,1.43195 -4.5005,1.43195 a 1.1983764,1.137415 0 0 1 -1.54513,-0.66094 1.1983764,1.137415 0 0 1 0.6966,-1.46658 c 0,0 2.06268,-0.74281 4.65863,-1.48311 2.25735,-0.64376 5.15311,-0.96579 8.04912,-0.96532 z" /><path
                style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#355f50;stroke-width:5.193;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
                d="m 650.9231,-33.252023 -29.35737,-23.432772 -21.36477,40.924821"
                id="path2885" /><path
                style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#355f50;stroke-width:5.193;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
                d="M 650.9641,-33.692073 637.54763,-67.486431 614.58877,-4.2443489"
                id="path2885-1" /><path
                style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#355f50;stroke-width:5.193;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
                d="m 668.36839,-34.027162 13.41647,-33.794358 22.95886,63.2420819"
                id="path2885-1-2" /><path
                style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#355f50;stroke-width:5.193;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke"
                d="m 667.86293,-33.26899 29.35737,-23.432772 21.36477,40.924821"
                id="path2885-8" /><path
                style="fill:#355f50;fill-opacity:1;stroke:none;stroke-width:0.970605;stroke-linecap:round;stroke-linejoin:round;stroke-opacity:1;paint-order:stroke fill markers"
                d="m 651.00923,-117.34209 v 86.528745 h 16.534 v -86.293195 z"
                id="path2887" /><path
                id="rect2886"
                style="fill:none;stroke:#355f50;stroke-width:3.86052;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1;paint-order:markers fill stroke"
                d="m 737.45398,-198.49124 c -9.20095,0 -16.60835,9.08604 -16.60835,20.3724 0,2.01068 0.24508,3.94689 0.68352,5.77897 l -4.63854,14.03997 11.9172,-2.43137 c 2.51793,1.88254 5.46969,2.98534 8.64617,2.98534 h 97.45959 c 9.20095,0 16.60789,-9.08655 16.60789,-20.37291 0,-11.28636 -7.40694,-20.3724 -16.60789,-20.3724 z" /><text
                xml:space="preserve"
                style="font-style:italic;font-size:30.6297px;line-height:0;font-family:Zapfino;-inkscape-font-specification:'Zapfino Italic';letter-spacing:3.67555px;word-spacing:0.728651px;fill:#355f50;fill-opacity:1;stroke:#355f50;stroke-width:2.306;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1;paint-order:markers fill stroke"
                x="699.18512"
                y="-178.29329"
                id="text2888"
                transform="scale(1.0621917,0.94144964)"><tspan
                    id="tspan2888"
                    style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:30.6297px;font-family:Arial;-inkscape-font-specification:Arial;fill:#355f50;fill-opacity:1;stroke:#355f50;stroke-width:2.306;stroke-dasharray:none;stroke-opacity:1"
                    x="699.18512"
                    y="-178.29329">Error</tspan></text></g></svg>


        <p>An issue occured. 
            <br>
            The page is currently not available. 
            <br>
            Feel free to contact us.</p>
    </div>
</div>

{% endblock %}